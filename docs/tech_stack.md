# SalesBoost 技术栈 - 2026年硅谷最先进选型

## 📊 技术选型原则

基于项目目的（销售培训平台）和2026年硅谷技术趋势，选择以下技术栈：

### 核心原则

1. **生产级稳定性**：选择经过大规模验证的技术
2. **Python原生优先**：避免DLL依赖，提高跨平台兼容性
3. **性能优先**：支持大规模数据和实时检索
4. **可扩展性**：支持多租户、水平扩展
5. **开发者友好**：易于集成、调试和维护

---

## 🗄️ 向量数据库：Qdrant（推荐）

### 为什么选择Qdrant？

**优势**：
- ✅ **Python原生**：无DLL依赖，Windows/Linux/Mac全平台支持
- ✅ **高性能**：Rust核心，性能优异
- ✅ **生产级**：被多家公司用于生产环境
- ✅ **丰富功能**：支持过滤、混合检索、标量量化
- ✅ **易于部署**：支持本地、Docker、云服务

**对比ChromaDB**：
- ChromaDB：Windows上DLL问题，Rust绑定复杂
- Qdrant：Python原生，无DLL问题，更稳定

**2026年趋势**：
- Qdrant在2025-2026年获得大量采用
- 更好的生产环境支持
- 更活跃的社区

### 降级方案：ChromaDB

如果Qdrant不可用，自动降级到ChromaDB。

---

## 📄 文档解析：MinerU（推荐）

### 为什么选择MinerU？

**优势**：
- ✅ **强大的PDF解析**：支持扫描件、复杂布局
- ✅ **结构化输出**：Markdown格式，保留文档结构
- ✅ **表格识别**：自动识别和提取表格
- ✅ **公式识别**：支持数学公式
- ✅ **多后端**：pipeline（快速）、vlm（高精度）、hybrid（平衡）

**对比PyMuPDF**：
- PyMuPDF：基础PDF解析，无法处理扫描件
- MinerU：专业级解析，支持OCR、表格、公式

**2026年趋势**：
- MinerU是2025年新发布的专业文档解析工具
- 被多个RAG项目采用
- 支持多模态文档理解

### 降级方案：PyMuPDF

如果MinerU不可用，降级到PyMuPDF。

---

## 🧠 知识图谱：NetworkX（MVP）→ Neo4j（生产）

### MVP阶段：NetworkX

**优势**：
- ✅ Python原生，易于集成
- ✅ 轻量级，适合中小规模图
- ✅ 丰富的图算法支持

### 生产阶段：Neo4j（可选）

**优势**：
- ✅ 专业图数据库
- ✅ 支持大规模图
- ✅ Cypher查询语言
- ✅ 生产级性能

**迁移路径**：代码已设计为可切换，只需修改`graph_builder.py`。

---

## 🔍 RAG技术栈

### 向量检索：Qdrant + OpenAI Embeddings

- **Embedding模型**：`text-embedding-3-small`（默认）或`text-embedding-3-large`（高精度）
- **向量维度**：1536（small）或3072（large）
- **距离度量**：Cosine相似度

### 关键词检索：BM25

- **库**：`rank-bm25`
- **优势**：轻量级，中文支持好
- **用途**：混合检索的组成部分

### Reranker：BGE-Reranker（推荐）

- **优势**：开源，性能优秀，可本地部署
- **备选**：Cohere Rerank v3（API）

### 查询扩展：LLM（GPT-4）

- **用途**：生成查询变体
- **优化**：针对销售场景的Prompt

---

## 🧬 GraphRAG技术栈

### 图存储：NetworkX

- **格式**：DiGraph（有向图）
- **持久化**：Pickle格式（`.gpickle`）
- **优势**：Python原生，易于调试

### 社区检测：Louvain算法

- **库**：`python-louvain`
- **优势**：快速，适合大规模图
- **用途**：层次化社区检测

### 关系提取：LLM（GPT-4）+ 规则

- **LLM**：结构化输出，高准确率
- **规则**：正则模式，快速提取
- **融合**：LLM + 规则双重提取

---

## 🤖 LLM配置

### 主模型：GPT-4

- **用途**：Agent推理、生成
- **配置**：通过`OPENAI_API_KEY`和`OPENAI_BASE_URL`

### Embedding模型：text-embedding-3-small

- **用途**：向量化
- **优势**：成本低，性能好
- **备选**：text-embedding-3-large（更高精度）

---

## 📦 完整技术栈列表

### 核心框架

| 组件 | 技术选型 | 版本 | 理由 |
|-----|---------|------|------|
| **Web框架** | FastAPI | >=0.109.0 | 异步、高性能、自动文档 |
| **数据库** | SQLite（开发）→ PostgreSQL（生产） | - | 轻量级→生产级 |
| **向量数据库** | Qdrant | >=1.7.0 | Python原生，高性能 |
| **图数据库** | NetworkX（MVP）→ Neo4j（生产） | >=3.2 | 轻量级→专业级 |

### 文档处理

| 组件 | 技术选型 | 版本 | 理由 |
|-----|---------|------|------|
| **PDF解析** | MinerU（优先）→ PyMuPDF | >=0.4.0 | 专业级→基础 |
| **Excel解析** | openpyxl | >=3.1.2 | Python原生 |
| **Word解析** | python-docx | >=1.1.0 | Python原生 |
| **表格处理** | pandas | >=2.0.0 | 数据处理标准库 |

### RAG技术

| 组件 | 技术选型 | 版本 | 理由 |
|-----|---------|------|------|
| **Embedding** | OpenAI text-embedding-3-small | - | 高质量，成本低 |
| **关键词检索** | rank-bm25 | >=0.2.2 | 轻量级，中文支持 |
| **Reranker** | BGE-Reranker | >=1.2.0 | 开源，性能优秀 |
| **查询扩展** | GPT-4 | - | 高质量查询变体 |

### GraphRAG技术

| 组件 | 技术选型 | 版本 | 理由 |
|-----|---------|------|------|
| **图存储** | NetworkX | >=3.2 | Python原生 |
| **社区检测** | python-louvain | >=0.16 | 快速，准确 |
| **关系提取** | GPT-4 + 规则 | - | 高准确率 |

### 其他工具

| 组件 | 技术选型 | 版本 | 理由 |
|-----|---------|------|------|
| **缓存** | Redis | >=5.0.1 | 高性能缓存 |
| **任务队列** | Redis（简单）→ Celery（复杂） | - | 轻量级→专业级 |
| **监控** | Prometheus | >=0.19.0 | 标准监控 |

---

## 🚀 2026年技术趋势

### 1. 向量数据库：Qdrant崛起

- **趋势**：Qdrant在2025-2026年获得大量采用
- **原因**：Python原生、高性能、易部署
- **采用**：✅ 已采用

### 2. 文档解析：MinerU专业化

- **趋势**：专业文档解析工具成为RAG标配
- **原因**：复杂文档（扫描件、表格、公式）需求增加
- **采用**：✅ 已集成

### 3. GraphRAG：知识图谱增强

- **趋势**：GraphRAG成为RAG升级方向
- **原因**：多跳推理、关系检索需求
- **采用**：✅ 已实现

### 4. 混合检索：向量+关键词+图

- **趋势**：多源融合检索成为标准
- **原因**：单一检索策略无法满足复杂需求
- **采用**：✅ 已实现

### 5. 可解释性：推理路径

- **趋势**：RAG系统需要可解释性
- **原因**：用户需要理解检索结果来源
- **采用**：✅ 已实现

---

## 📈 性能对比

### 向量数据库

| 指标 | ChromaDB | Qdrant |
|-----|----------|--------|
| **Windows兼容性** | ❌ DLL问题 | ✅ Python原生 |
| **性能** | 中等 | 高 |
| **生产级** | 中等 | 高 |
| **社区活跃度** | 高 | 非常高 |

### 文档解析

| 指标 | PyMuPDF | MinerU |
|-----|---------|--------|
| **扫描件OCR** | ❌ | ✅ |
| **表格识别** | 基础 | 专业 |
| **公式识别** | ❌ | ✅ |
| **结构化输出** | ❌ | ✅ |

---

## ✅ 最终技术选型

### 已采用（2026年推荐）

1. ✅ **Qdrant** - 向量数据库
2. ✅ **MinerU** - 文档解析（优先）
3. ✅ **NetworkX** - 图存储（MVP）
4. ✅ **GraphRAG** - 知识图谱增强
5. ✅ **混合检索** - 向量+关键词+图
6. ✅ **BGE-Reranker** - 重排序

### 降级方案

- Qdrant → ChromaDB
- MinerU → PyMuPDF
- NetworkX → Neo4j（生产）

---

## 🎯 总结

基于2026年硅谷技术趋势和项目需求，我们选择了：

1. **Qdrant**：Python原生向量数据库，无DLL问题
2. **MinerU**：专业文档解析，支持复杂文档
3. **GraphRAG**：知识图谱增强，支持多跳推理
4. **混合检索**：向量+关键词+图，全面覆盖

这些技术选型确保了：
- ✅ 生产级稳定性
- ✅ 高性能
- ✅ 易于部署和维护
- ✅ 符合2026年技术趋势


